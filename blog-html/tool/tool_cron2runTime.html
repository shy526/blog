<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tool-cron-runtime</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        .row-margin-top {
            margin-top: 20px;
        }
    </style>

</head>
<body>
<div class="container">

    <div class="row row-margin-top">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <div class="input-group" id="cron1">
                <div class="input-group-addon">crom表达式</div>
                <div class="input-group-addon">秒</div>
                <input type="text" class="form-control" value="0">
                <div class="input-group-addon">分钟</div>
                <input type="text" class="form-control" value="0">
                <div class="input-group-addon">小时</div>
                <input type="text" class="form-control" value="0">
                <div class="input-group-addon">日</div>
                <input type="text" class="form-control" value="*">
                <div class="input-group-addon">月</div>
                <input type="text" class="form-control" value="*">
                <div class="input-group-addon"></div>
                <input type="text" class="form-control" value="?">
            </div>
            <br>
            <div class="input-group">
                <div class="input-group-addon">crom表达式</div>
                <input type="text" class="form-control" id="cronb" disabled value="0 0 0 * * ?">
            </div>
            <br>
            <div class="col-md-4"></div>
            <div class="col-md-3">
                <div class="input-group">
                    <div class="input-group-addon">运行次数</div>
                    <input type="number" id="num" class="form-control" value="5">
                    <div class="input-group-btn">
                        <button class="btn btn-default" id="yc" type="button">预测</button>
                    </div>
                </div>
            </div>
            <br>

        </div>
    </div>

    <div class="row row-margin-top">
        <div class="col-md-4"></div>
        <div class="cron-run-time col-md-4" style="font-size: 18px"></div>
    </div>
</div>

</div>
<div id="modal">

</div>
</body>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="../js/tool/time-format.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<script src="../js/tool/corn2runtime.js"></script>
<link rel="stylesheet" href="../plungin/iziModal/iziModal.min.css">
<script src="../plungin/iziModal/iziModal.min.js"></script>
<script>
    $(function () {
        $("#cron1 input").on('input propertychange', function () {
            var text = "";
            $("#cron1 input").each(function (val) {
                var val2 = $("#cron1 input").eq(val).val();
                text += val2 + " "
            })
            $("#cronb").val(text);
        });
        $("#yc").click(function () {
            var t=false;
            $("#cron1 input").each(function (val) {
                var val2 = $("#cron1 input").eq(val).val();
                if (!val2) {
                    t= true;
                }
            })
            if (t){
                $("#modal").iziModal({
                    title: "cron 中的值不能为空",
                    headerColor: '#BD5B5B',
                    width: 600,
                    onClosed:function () {
                        $('#modal').iziModal('destroy');
                    }
                });
                $('#modal').iziModal('open');
                return;
            }
            var num = $("#num").val();
            var cron = $("#cronb").val()
            if (num) {
                $(".cron-run-time").empty()
                var date = new Date()
                for (var i = 0; i < num; i++) {
                    var date = cron2Runtime.analysis(cron, date);
                    var html = "<p>第<span style='color: #ef5b5b'>" + (i + 1) + "</span>次,运行时间为:  " + formatDate(date) + "</p>"
                    $(".cron-run-time").append(html)
                }
            } else {
                $("#modal").iziModal({
                    title: "确任你的运行次数",
                    headerColor: '#BD5B5B',
                    width: 600,
                    onClosed:function () {
                        $('#modal').iziModal('destroy');
                    }
                });
                $('#modal').iziModal('open');
            }
        })
    })
</script>
</html>